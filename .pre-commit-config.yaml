# Pre-commit hooks for code quality
# See https://pre-commit.com for more information
# Install: pre-commit install
# Run manually: pre-commit run --all-files

repos:
  # Ruff - Fast Python linter (replaces flake8, isort, and more)
- repo: local
  hooks:
  - id: ruff
    name: ruff
    entry: uv run ruff check --fix
    language: system
    types: [python]
  - id: ruff-format
    name: ruff-format
    entry: uv run ruff format
    language: system
    types: [python]

  # Black - Code formatter
- repo: local
  hooks:
  - id: black
    name: black
    entry: uv run black
    language: system
    types: [python]

  # isort - Import sorting
- repo: local
  hooks:
  - id: isort
    name: isort
    entry: uv run isort --profile black --line-length 100
    language: system
    types: [python]

  # mypy - Static type checking
- repo: local
  hooks:
  - id: mypy
    name: mypy
    entry: uv run mypy --config-file=pyproject.toml
    language: system
    types: [python]
    exclude: ^(tests/|examples/|scripts/demo_|scripts/example_)

  # General file checks
- repo: https://github.com/pre-commit/pre-commit-hooks
  rev: v5.0.0
  hooks:
  - id: trailing-whitespace
  - id: end-of-file-fixer
  - id: check-yaml
  - id: check-added-large-files
    args: [--maxkb=1000]
  - id: check-merge-conflict
  - id: check-toml
  - id: debug-statements
  - id: mixed-line-ending

  # Security checks
- repo: local
  hooks:
  - id: bandit
    name: bandit
    entry: uv run bandit -c pyproject.toml -r src/
    language: system
    types: [python]

  # Docstring coverage (optional - can be strict)
- repo: local
  hooks:
  - id: interrogate
    name: interrogate
    entry: uv run interrogate --config=pyproject.toml
    language: system
    pass_filenames: false

  # YAML formatting
- repo: https://github.com/macisamuele/language-formatters-pre-commit-hooks
  rev: v2.14.0
  hooks:
  - id: pretty-format-yaml
    args: [--autofix, --indent, '2']
